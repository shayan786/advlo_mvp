-# Navigation Header
%nav.navbar.navbar-default.navbar-fixed-top{role: "navigation"}
  .container-fluid
    / Brand and toggle get grouped for better mobile display
    .navbar-header
      %button.navbar-toggle#mobile-toggle-button{type: "button"}
        %span.sr-only Togle navigation
        %span.icon-bar
        %span.icon-bar
        %span.icon-bar
      %a.navbar-brand{href: "/"}

    #mobile-navbar
      = render partial: 'mobile_header'

    / Collect the nav links, forms, and other content for toggling
    #header-navbar.collapse.navbar-collapse
      %ul.nav.navbar-nav.navbar-right.login-right
        %li.dropdown.header-button
          %button.btn.btn-default.navbar-btn{"data-toggle" => "dropdown", href: "#"}
            Adventures
            %b.caret
          %ul.dropdown-menu#locations-menu{role: "menu"}
            - adv_regions.each_with_index do |r, i|
              .main-location
                = link_to "#{r} (#{adv_count(r)})", "/adventures?region=#{r.gsub(' ','-')}"
                - get_countries(r).each do |l|
                  .sub-location.country=link_to "#{l[0]} (#{city_adv_count(l[0])})", "/adventures?country=#{l[0]}"
                  - get_cities(l[0]).each do |l|
                    .sub-location.city=link_to "- #{l[0]}", "/adventures?city=#{l[0]}"

      
        %li
          %form
            %a.btn.btn-default.navbar-btn.header-button{href: "/adventures/info"}
              Host
        
        - if current_user && count = action_required(current_user)
          %li
            %form
              %a.btn.btn-default.navbar-btn{href: "/users/reservations", title: "Action Required"}
                %i.fa.fa-flag
                = "(#{count})"

        
        - if current_user
          = render partial: 'logged_in_dropdown'

        - else
          = render partial: 'logged_out_dropdown'


:javascript
  $('#mobile-toggle-button').click(function(){
    $('#mobile-navbar').slideToggle('down')
  })

  $('#adventures-mobile').click(function(){
    $('#adventures-div').slideToggle('down');
  })

  $('#login-mobile').click(function(){
    $('#mobile-login-form').slideToggle('slow');
    $('#adventures-div').slideUp()
  })

/*!
 * FullCalendar v2.1.0-beta1
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
(function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):t(jQuery,moment)})(function(t,e){function n(t,e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}function i(t,e){var n=e.longDateFormat("L");return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),t.isRTL?n+=" ddd":n="ddd "+n,n}function r(t){s(we,t)}function s(e){function n(n,i){t.isPlainObject(i)&&t.isPlainObject(e[n])&&!o(n)?e[n]=s({},e[n],i):void 0!==i&&(e[n]=i)}for(var i=1;arguments.length>i;i++)t.each(arguments[i],n);return e}function o(t){return/(Time|Duration)$/.test(t)}function a(n,i){function r(t){Q?h()&&(g(),u(t)):o()}function o(){J=X.theme?"ui":"fc",n.addClass("fc"),X.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),X.theme?n.addClass("ui-widget"):n.addClass("fc-unthemed"),Q=t("<div class='fc-view-container'/>").prependTo(n),U=new l(j,X),K=U.render(),K&&n.prepend(K),c(X.defaultView),X.handleWindowResize&&t(window).resize(m)}function a(){te&&te.destroy(),U.destroy(),Q.remove(),n.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),t(window).unbind("resize",m)}function h(){return n.is(":visible")}function c(t){u(0,t)}function u(e,n){ae++,te&&n&&te.name!==n&&(U.deactivateButton(te.name),W(),te.start&&te.destroy(),te.el.remove(),te=null),!te&&n&&(te=new Te[n](j),te.el=t("<div class='fc-view fc-"+n+"-view' />").appendTo(Q),U.activateButton(n)),te&&(e&&(ne=te.incrementDate(ne,e)),te.start&&!e&&ne.isWithin(te.intervalStart,te.intervalEnd)||h()&&(W(),te.start&&te.destroy(),te.render(ne),F(),S(),H(),b())),F(),ae--}function f(t){return h()?(t&&p(),ae++,te.updateHeight(),te.updateWidth(),ae--,!0):void 0}function g(){h()&&p()}function p(){ee="number"==typeof X.contentHeight?X.contentHeight:"number"==typeof X.height?X.height-(K?K.outerHeight(!0):0):Math.round(Q.width()/Math.max(X.aspectRatio,.5))}function m(t){if(!ae&&t.target===window&&te.start){var e=++oe;setTimeout(function(){e!=oe||ae||f(!0)&&te.trigger("windowResize",se)},X.windowResizeDelay)}}function v(){w(),E()}function y(){h()&&(W(),te.destroyEvents(),te.renderEvents(le),F())}function w(){W(),te.destroyEvents(),F()}function b(){!X.lazyFetching||ie(te.start,te.end)?E():y()}function E(){re(te.start,te.end)}function T(t){le=t,y()}function C(){y()}function S(){U.updateTitle(te.title)}function H(){var t=j.getNow();t.isWithin(te.intervalStart,te.intervalEnd)?U.disableButton("today"):U.enableButton("today")}function k(t,e){t=j.moment(t),e=e?j.moment(e):t.hasTime()?t.clone().add(j.defaultTimedEventDuration):t.clone().add(j.defaultAllDayEventDuration),te.select(t,e)}function x(){te&&te.unselect()}function M(){u(-1)}function R(){u(1)}function z(){ne.add("years",-1),u()}function N(){ne.add("years",1),u()}function Y(){ne=j.getNow(),u()}function A(t){ne=j.moment(t),u()}function _(t){ne.add(e.duration(t)),u()}function O(){return ne.clone()}function W(){Q.css({width:"100%",height:Q.height(),overflow:"hidden"})}function F(){Q.css({width:"",height:"",overflow:""})}function Z(){return j}function L(){return te}function B(t,e){return void 0===e?X[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(X[t]=e,f(!0)),void 0)}function V(t,e){return X[t]?X[t].apply(e||se,Array.prototype.slice.call(arguments,2)):void 0}var j=this;i=i||{};var I,X=s({},we,i);I=X.lang in be?be[X.lang]:be[we.lang],I&&(X=s({},we,I,i)),X.isRTL&&(X=s({},we,Ee,I||{},i)),j.options=X,j.render=r,j.destroy=a,j.refetchEvents=v,j.reportEvents=T,j.reportEventChange=C,j.rerenderEvents=y,j.changeView=c,j.select=k,j.unselect=x,j.prev=M,j.next=R,j.prevYear=z,j.nextYear=N,j.today=Y,j.gotoDate=A,j.incrementDate=_,j.getDate=O,j.getCalendar=Z,j.getView=L,j.option=B,j.trigger=V;var $=D(e.langData(X.lang));if(X.monthNames&&($._months=X.monthNames),X.monthNamesShort&&($._monthsShort=X.monthNamesShort),X.dayNames&&($._weekdays=X.dayNames),X.dayNamesShort&&($._weekdaysShort=X.dayNamesShort),null!=X.firstDay){var q=D($._week);q.dow=X.firstDay,$._week=q}j.defaultAllDayEventDuration=e.duration(X.defaultAllDayEventDuration),j.defaultTimedEventDuration=e.duration(X.defaultTimedEventDuration),j.moment=function(){var t;return"local"===X.timezone?(t=De.moment.apply(null,arguments),t.hasTime()&&t.local()):t="UTC"===X.timezone?De.moment.utc.apply(null,arguments):De.moment.parseZone.apply(null,arguments),t._lang=$,t},j.getIsAmbigTimezone=function(){return"local"!==X.timezone&&"UTC"!==X.timezone},j.rezoneDate=function(t){return j.moment(t.toArray())},j.getNow=function(){var t=X.now;return"function"==typeof t&&(t=t()),j.moment(t)},j.calculateWeekNumber=function(t){var e=X.weekNumberCalculation;return"function"==typeof e?e(t):"local"===e?t.week():"ISO"===e.toUpperCase()?t.isoWeek():void 0},j.getEventEnd=function(t){return t.end?t.end.clone():j.getDefaultEventEnd(t.allDay,t.start)},j.getDefaultEventEnd=function(t,e){var n=e.clone();return t?n.stripTime().add(j.defaultAllDayEventDuration):n.add(j.defaultTimedEventDuration),j.getIsAmbigTimezone()&&n.stripZone(),n},j.formatRange=function(t,e,n){return"function"==typeof n&&(n=n.call(j,X,$)),P(t,e,n,null,X.isRTL)},j.formatDate=function(t,e){return"function"==typeof e&&(e=e.call(j,X,$)),G(t,e)},d.call(j,X);var U,K,Q,J,te,ee,ne,ie=j.isFetchNeeded,re=j.fetchEvents,se=n[0],oe=0,ae=0,le=[];ne=null!=X.defaultDate?j.moment(X.defaultDate):j.getNow(),j.getSuggestedViewHeight=function(){return void 0===ee&&g(),ee},j.isHeightAuto=function(){return"auto"===X.contentHeight||"auto"===X.height}}function l(e,n){function i(){var e=n.header;return u=n.theme?"ui":"fc",e?f=t("<div class='fc-toolbar'/>").append(s("left")).append(s("right")).append(s("center")).append('<div class="fc-clear"/>'):void 0}function r(){f.remove()}function s(i){var r=t('<div class="fc-'+i+'"/>'),s=n.header[i];return s&&t.each(s.split(" "),function(){var i,s=t(),o=!0;t.each(this.split(","),function(i,r){var a,l,d,h,c,f,g,p;"title"==r?(s=s.add(t("<h2>&nbsp;</h2>")),o=!1):(e[r]?a=e[r]:Te[r]&&(a=function(){p.removeClass(u+"-state-hover"),e.changeView(r)}),a&&(l=y(n.themeButtonIcons,r),d=y(n.buttonIcons,r),h=y(n.defaultButtonText,r),c=y(n.buttonText,r),f=c?k(c):l&&n.theme?"<span class='ui-icon ui-icon-"+l+"'></span>":d&&!n.theme?"<span class='fc-icon fc-icon-"+d+"'></span>":k(h||r),g=["fc-"+r+"-button",u+"-button",u+"-state-default"],p=t('<button class="'+g.join(" ")+'">'+f+"</button>").click(function(){p.hasClass(u+"-state-disabled")||a()}).mousedown(function(){p.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-down")}).mouseup(function(){p.removeClass(u+"-state-down")}).hover(function(){p.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-hover")},function(){p.removeClass(u+"-state-hover").removeClass(u+"-state-down")}),s=s.add(p)))}),o&&s.first().addClass(u+"-corner-left").end().last().addClass(u+"-corner-right").end(),s.length>1?(i=t("<div/>"),o&&i.addClass("fc-button-group"),i.append(s),r.append(i)):r.append(s)}),r}function o(t){f.find("h2").text(t)}function a(t){f.find(".fc-"+t+"-button").addClass(u+"-state-active")}function l(t){f.find(".fc-"+t+"-button").removeClass(u+"-state-active")}function d(t){f.find(".fc-"+t+"-button").attr("disabled","disabled").addClass(u+"-state-disabled")}function h(t){f.find(".fc-"+t+"-button").removeAttr("disabled").removeClass(u+"-state-disabled")}var c=this;c.render=i,c.destroy=r,c.updateTitle=o,c.activateButton=a,c.deactivateButton=l,c.disableButton=d,c.enableButton=h;var u,f=t()}function d(e){function n(t,e){return!C||t.clone().stripZone()<C.clone().stripZone()||e.clone().stripZone()>k.clone().stripZone()}function i(t,e){C=t,k=e,P=[];var n=++G,i=Y.length;A=i;for(var s=0;i>s;s++)r(Y[s],n)}function r(e,n){s(e,function(i){var r,s,o=t.isArray(e.events);if(n==G){if(i)for(r=0;i.length>r;r++)s=i[r],o||(s=b(s,e)),s&&P.push(s);A--,A||R(P)}})}function s(n,i){var r,o,a=De.sourceFetchers;for(r=0;a.length>r;r++){if(o=a[r].call(T,n,C.clone(),k.clone(),e.timezone,i),o===!0)return;if("object"==typeof o)return s(o,i),void 0}var l=n.events;if(l)t.isFunction(l)?(v(),l.call(T,C.clone(),k.clone(),e.timezone,function(t){i(t),y()})):t.isArray(l)?i(l):i();else{var d=n.url;if(d){var h,c=n.success,u=n.error,f=n.complete;h=t.isFunction(n.data)?n.data():n.data;var g=t.extend({},h||{}),p=H(n.startParam,e.startParam),m=H(n.endParam,e.endParam),w=H(n.timezoneParam,e.timezoneParam);p&&(g[p]=C.format()),m&&(g[m]=k.format()),e.timezone&&"local"!=e.timezone&&(g[w]=e.timezone),v(),t.ajax(t.extend({},Ce,n,{data:g,success:function(e){e=e||[];var n=S(c,this,arguments);t.isArray(n)&&(e=n),i(e)},error:function(){S(u,this,arguments),i()},complete:function(){S(f,this,arguments),y()}}))}else i()}}function o(t){var e=a(t);e&&(Y.push(e),A++,r(e,G))}function a(e){var n,i,r=De.sourceNormalizers;if(t.isFunction(e)||t.isArray(e)?n={events:e}:"string"==typeof e?n={url:e}:"object"==typeof e&&(n=t.extend({},e)),n){for(n.className?"string"==typeof n.className&&(n.className=n.className.split(/\s+/)):n.className=[],t.isArray(n.events)&&(n.events=t.map(n.events,function(t){return b(t,n)})),i=0;r.length>i;i++)r[i].call(T,n);return n}}function l(e){Y=t.grep(Y,function(t){return!d(t,e)}),P=t.grep(P,function(t){return!d(t.source,e)}),R(P)}function d(t,e){return t&&e&&c(t)==c(e)}function c(t){return("object"==typeof t?t.events||t.url:"")||t}function u(t){t.start=T.moment(t.start),t.end&&(t.end=T.moment(t.end)),E(t),f(t),R(P)}function f(t){var e,n,i,r;for(e=0;P.length>e;e++)if(n=P[e],n._id==t._id&&n!==t)for(i=0;O.length>i;i++)r=O[i],void 0!==t[r]&&(n[r]=t[r])}function g(t,e){var n=b(t);n&&(n.source||(e&&(N.events.push(n),n.source=N),P.push(n)),R(P))}function p(e){var n,i;for(null==e?e=function(){return!0}:t.isFunction(e)||(n=e+"",e=function(t){return t._id==n}),P=t.grep(P,e,!0),i=0;Y.length>i;i++)t.isArray(Y[i].events)&&(Y[i].events=t.grep(Y[i].events,e,!0));R(P)}function m(e){return t.isFunction(e)?t.grep(P,e):null!=e?(e+="",t.grep(P,function(t){return t._id==e})):P}function v(){_++||x("loading",null,!0,M())}function y(){--_||x("loading",null,!1,M())}function b(n,i){var r,s,o,a,l={};return e.eventDataTransform&&(n=e.eventDataTransform(n)),i&&i.eventDataTransform&&(n=i.eventDataTransform(n)),r=T.moment(n.start||n.date),r.isValid()&&(s=null,!n.end||(s=T.moment(n.end),s.isValid()))?(o=n.allDay,void 0===o&&(a=H(i?i.allDayDefault:void 0,e.allDayDefault),o=void 0!==a?a:!(r.hasTime()||s&&s.hasTime())),o?(r.hasTime()&&r.stripTime(),s&&s.hasTime()&&s.stripTime()):(r.hasTime()||(r=T.rezoneDate(r)),s&&!s.hasTime()&&(s=T.rezoneDate(s))),t.extend(l,n),i&&(l.source=i),l._id=n._id||(void 0===n.id?"_fc"+Se++:n.id+""),l.className=n.className?"string"==typeof n.className?n.className.split(/\s+/):n.className:[],l.allDay=o,l.start=r,l.end=s,e.forceEventDuration&&!l.end&&(l.end=z(l)),h(l),l):void 0}function E(t,e,n){var i,r,s,o,a=t._allDay,l=t._start,d=t._end,h=!1;return e||n||(e=t.start,n=t.end),i=t.allDay!=a?t.allDay:!(e||n).hasTime(),i&&(e&&(e=e.clone().stripTime()),n&&(n=n.clone().stripTime())),e&&(r=i?w(e,l.clone().stripTime()):w(e,l)),i!=a?h=!0:n&&(s=w(n||T.getDefaultEventEnd(i,e||l),e||l).subtract(w(d||T.getDefaultEventEnd(a,l),l))),o=D(m(t._id),h,i,r,s),{dateDelta:r,durationDelta:s,undo:o}}function D(n,i,r,s,o){var a=T.getIsAmbigTimezone(),l=[];return t.each(n,function(t,n){var d=n._allDay,c=n._start,u=n._end,f=null!=r?r:d,g=c.clone(),p=!i&&u?u.clone():null;f?(g.stripTime(),p&&p.stripTime()):(g.hasTime()||(g=T.rezoneDate(g)),p&&!p.hasTime()&&(p=T.rezoneDate(p))),p||!e.forceEventDuration&&!+o||(p=T.getDefaultEventEnd(f,g)),g.add(s),p&&p.add(s).add(o),a&&(+s||+o)&&(g.stripZone(),p&&p.stripZone()),n.allDay=f,n.start=g,n.end=p,h(n),l.push(function(){n.allDay=d,n.start=c,n.end=u,h(n)})}),function(){for(var t=0;l.length>t;t++)l[t]()}}var T=this;T.isFetchNeeded=n,T.fetchEvents=i,T.addEventSource=o,T.removeEventSource=l,T.updateEvent=u,T.renderEvent=g,T.removeEvents=p,T.clientEvents=m,T.mutateEvent=E;var C,k,x=T.trigger,M=T.getView,R=T.reportEvents,z=T.getEventEnd,N={events:[]},Y=[N],G=0,A=0,_=0,P=[];t.each((e.events?[e.events]:[]).concat(e.eventSources||[]),function(t,e){var n=a(e);n&&Y.push(n)});var O=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"]}function h(t){t._allDay=t.allDay,t._start=t.start.clone(),t._end=t.end?t.end.clone():null}function c(t,e){e.left&&t.css({"border-left-width":1,"margin-left":e.left-1}),e.right&&t.css({"border-right-width":1,"margin-right":e.right-1})}function u(t){t.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function f(e,n,i){var r=Math.floor(n/e.length),s=Math.floor(n-r*(e.length-1)),o=[],a=[],l=[],d=0;g(e),e.each(function(n,i){var h=n===e.length-1?s:r,c=t(i).outerHeight(!0);h>c?(o.push(i),a.push(c),l.push(t(i).height())):d+=c}),i&&(n-=d,r=Math.floor(n/o.length),s=Math.floor(n-r*(o.length-1))),t(o).each(function(e,n){var i=e===o.length-1?s:r,d=a[e],h=l[e],c=i-(d-h);i>d&&t(n).css("min-height",c)})}function g(t){t.css("min-height","")}function p(e){var n=0;return e.find("> *").each(function(e,i){var r=t(i).outerWidth();r>n&&(n=r)}),e.width(n),n}function m(t){var e=t.offset().left,n=e+t.width(),i=t.children(),r=i.offset().left,s=r+i.outerWidth();return{left:r-e,right:n-s}}function v(t){return 1==t.which&&!t.ctrlKey}function y(t,e){if(t=t||{},void 0!==t[e])return t[e];for(var n,i=e.split(/(?=[A-Z])/),r=i.length-1;r>=0;r--)if(n=t[i[r].toLowerCase()],void 0!==n)return n;return t["default"]}function w(t,n){return e.duration({days:t.clone().stripTime().diff(n.clone().stripTime(),"days"),ms:t.time()-n.time()})}function b(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function E(t,e){return t-e}function D(t){var e=function(){};return e.prototype=t,new e}function T(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function C(t){return Array.prototype.concat.apply([],t)}function S(e,n,i){if(t.isFunction(e)&&(e=[e]),e){var r,s;for(r=0;e.length>r;r++)s=e[r].apply(n,i)||s;return s}}function H(){for(var t=0;arguments.length>t;t++)if(void 0!==arguments[t])return arguments[t]}function k(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function x(t){return t.replace(/&.*?;/g,"")}function M(t){return t.charAt(0).toUpperCase()+t.slice(1)}function R(n,i,r){var s,o,a,l,d=n[0],h=1==n.length&&"string"==typeof d;return e.isMoment(d)?(l=e.apply(null,n),d._ambigTime&&(l._ambigTime=!0),d._ambigZone&&(l._ambigZone=!0)):b(d)||void 0===d?l=e.apply(null,n):(s=!1,o=!1,h?ke.test(d)?(d+="-01",n=[d],s=!0,o=!0):(a=xe.exec(d))&&(s=!a[5],o=!0):t.isArray(d)&&(o=!0),l=i?e.utc.apply(e,n):e.apply(null,n),s?(l._ambigTime=!0,l._ambigZone=!0):r&&(o?l._ambigZone=!0:h&&l.zone(d))),new z(l)}function z(t){T(this,t)}function N(t,e){var n,i=[],r=!1,s=!1;for(n=0;t.length>n;n++)i.push(De.moment.parseZone(t[n])),r=r||i[n]._ambigTime,s=s||i[n]._ambigZone;for(n=0;i.length>n;n++)r&&!e?i[n].stripTime():s&&i[n].stripZone();return i}function Y(t,n){return e.fn.format.call(t,n)}function G(t,e){return A(t,F(e))}function A(t,e){var n,i="";for(n=0;e.length>n;n++)i+=_(t,e[n]);return i}function _(t,e){var n,i;return"string"==typeof e?e:(n=e.token)?Me[n]?Me[n](t):Y(t,n):e.maybe&&(i=A(t,e.maybe),i.match(/[1-9]/))?i:""}function P(t,e,n,i,r){return t=De.moment.parseZone(t),e=De.moment.parseZone(e),n=t.lang().longDateFormat(n)||n,i=i||" - ",O(t,e,F(n),i,r)}function O(t,e,n,i,r){var s,o,a,l,d="",h="",c="",u="",f="";for(o=0;n.length>o&&(s=W(t,e,n[o]),s!==!1);o++)d+=s;for(a=n.length-1;a>o&&(s=W(t,e,n[a]),s!==!1);a--)h=s+h;for(l=o;a>=l;l++)c+=_(t,n[l]),u+=_(e,n[l]);return(c||u)&&(f=r?u+i+c:c+i+u),d+f+h}function W(t,e,n){var i,r;return"string"==typeof n?n:(i=n.token)&&(r=Re[i.charAt(0)],r&&t.isSame(e,r))?Y(t,i):!1}function F(t){return t in ze?ze[t]:ze[t]=Z(t)}function Z(t){for(var e,n=[],i=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;e=i.exec(t);)e[1]?n.push(e[1]):e[2]?n.push({maybe:Z(e[2])}):e[3]?n.push({token:e[3]}):e[5]&&n.push(e[5]);return n}function L(t){this.grid=t}function B(t){this.coordMaps=t}function V(t,e){this.coordMap=t,this.options=e||{}}function j(t,e){return t||e?t&&e?t.grid===e.grid&&t.row===e.row&&t.col===e.col:!1:!0}function I(e,n){this.options=n=n||{},this.sourceEl=e,this.parentEl=n.parentEl?t(n.parentEl):e.parent()}function X(t){this.view=t}function $(t){X.call(this,t),this.coordMap=new L(this)}function q(t,e){return t.eventStartMS-e.eventStartMS||e.eventDurationMS-t.eventDurationMS||e.event.allDay-t.event.allDay||(t.event.title||"").localeCompare(e.event.title)}function U(t){return!!t.el}function K(t){$.call(this,t)}function Q(t,e){var n,i;for(n=0;e.length>n;n++)if(i=e[n],i.leftCol<=t.rightCol&&i.rightCol>=t.leftCol)return!0;return!1}function J(t,e){return t.leftCol-e.leftCol}function te(t){$.call(this,t)}function ee(t){var e,n,i;if(t.sort(q),e=ne(t),ie(e),n=e[0]){for(i=0;n.length>i;i++)re(n[i]);for(i=0;n.length>i;i++)se(n[i],0,0)}}function ne(t){var e,n,i,r=[];for(e=0;t.length>e;e++){for(n=t[e],i=0;r.length>i&&oe(n,r[i]).length;i++);n.level=i,(r[i]||(r[i]=[])).push(n)}return r}function ie(t){var e,n,i,r,s;for(e=0;t.length>e;e++)for(n=t[e],i=0;n.length>i;i++)for(r=n[i],r.forwardSegs=[],s=e+1;t.length>s;s++)oe(r,t[s],r.forwardSegs)}function re(t){var e,n,i=t.forwardSegs,r=0;if(void 0===t.forwardPressure){for(e=0;i.length>e;e++)n=i[e],re(n),r=Math.max(r,1+n.forwardPressure);t.forwardPressure=r}}function se(t,e,n){var i,r=t.forwardSegs;if(void 0===t.forwardCoord)for(r.length?(r.sort(le),se(r[0],e+1,n),t.forwardCoord=r[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-n)/(e+1),i=0;r.length>i;i++)se(r[i],0,t.forwardCoord)}function oe(t,e,n){n=n||[];for(var i=0;e.length>i;i++)ae(t,e[i])&&n.push(e[i]);return n}function ae(t,e){return t.bottom>e.top&&t.top<e.bottom}function le(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||q(t,e)}function de(n){function i(e){var n=x[e];return t.isPlainObject(n)&&!o(e)?y(n,S.name):n}function r(t,e){return n.trigger.apply(n,[t,e||S].concat(Array.prototype.slice.call(arguments,2),[S]))}function s(t){var e=t.source||{};return H(t.startEditable,e.startEditable,i("eventStartEditable"),t.editable,e.editable,i("editable"))}function a(t){var e=t.source||{};return H(t.durationEditable,e.durationEditable,i("eventDurationEditable"),t.editable,e.editable,i("editable"))}function l(t,e,i,s){var o=n.mutateEvent(e,i,null);r("eventDrop",t,e,o.dateDelta,function(){o.undo(),k()},s,{}),k()}function d(t,e,i,s){var o=n.mutateEvent(e,null,i);r("eventResize",t,e,o.durationDelta,function(){o.undo(),k()},s,{}),k()}function h(t){return e.isMoment(t)&&(t=t.day()),N[t]}function c(){return R}function u(t,e,n){var i=t.clone();for(e=e||1;N[(i.day()+(n?e:0)+7)%7];)i.add("days",e);return i}function f(){var t=g.apply(null,arguments),e=p(t),n=m(e);return n}function g(t,e){var n=S.colCnt,i=A?-1:1,r=A?n-1:0;"object"==typeof t&&(e=t.col,t=t.row);var s=t*n+(e*i+r);return s}function p(t){var e=S.start.day();return t+=Y[e],7*Math.floor(t/R)+G[(t%R+R)%R]-e}function m(t){return S.start.clone().add("days",t)}function v(t){var e=w(t),n=b(e),i=E(n);return i}function w(t){return t.clone().stripTime().diff(S.start,"days")}function b(t){var e=S.start.day();return t+=e,Math.floor(t/7)*R+Y[(t%7+7)%7]-Y[e]}function E(t){var e=S.colCnt,n=A?-1:1,i=A?e-1:0,r=Math.floor(t/e),s=(t%e+e)%e*n+i;return{row:r,col:s}}function D(t,e){for(var n=S.rowCnt,i=S.colCnt,r=[],s=T(t,e),o=w(s.start),a=w(s.end),l=b(o),d=b(a)-1,h=0;n>h;h++){var c=h*i,u=c+i-1,f=Math.max(l,c),g=Math.min(d,u);if(g>=f){var m=E(f),v=E(g),y=[m.col,v.col].sort(),D=p(f)==o,C=p(g)+1==a;r.push({row:h,leftCol:y[0],rightCol:y[1],isStart:D,isEnd:C})}}return r}function T(t,e){var n,i,r=t.clone().stripTime();return e&&(n=e.clone().stripTime(),i=+e.time(),i&&i>=M&&n.add("days",1)),(!e||r>=n)&&(n=r.clone().add("days",1)),{start:r,end:n}}function C(t){var e=T(t.start,t.end);return e.end.diff(e.start,"days")>1}var S=this;S.calendar=n,S.opt=i,S.trigger=r,S.isEventDraggable=s,S.isEventResizable=a,S.eventDrop=l,S.eventResize=d;var k=n.reportEventChange,x=n.options,M=e.duration(x.nextDayThreshold);S.init(),S.getEventTimeText=function(t,e){var r,s;return"object"==typeof t&&"object"==typeof e?(r=t,s=e,e=arguments[2]):(r=t.start,s=t.end),e=e||i("timeFormat"),s&&i("displayEventEnd")?n.formatRange(r,s,e):n.formatDate(r,e)},S.isHiddenDay=h,S.skipHiddenDays=u,S.getCellsPerWeek=c,S.dateToCell=v,S.dateToDayOffset=w,S.dayOffsetToCellOffset=b,S.cellOffsetToCell=E,S.cellToDate=f,S.cellToCellOffset=g,S.cellOffsetToDayOffset=p,S.dayOffsetToDate=m,S.rangeToSegments=D,S.isMultiDayEvent=C;var R,z=i("hiddenDays")||[],N=[],Y=[],G=[],A=i("isRTL");(function(){i("weekends")===!1&&z.push(0,6);for(var e=0,n=0;7>e;e++)Y[e]=n,N[e]=-1!=t.inArray(e,z),N[e]||(G[n]=e,n++);if(R=n,!R)throw"invalid hiddenDays"})()}function he(t){de.call(this,t),this.dayGrid=new K(this),this.coordMap=this.dayGrid.coordMap}function ce(t){he.call(this,t)}function ue(t){he.call(this,t)}function fe(t){he.call(this,t)}function ge(t,e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")}function pe(t,e){return e.longDateFormat("LT").replace(/\s*a$/i,"")}function me(t){de.call(this,t),this.timeGrid=new te(this),this.opt("allDaySlot")?(this.dayGrid=new K(this),this.coordMap=new B([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap}function ve(t){me.call(this,t)}function ye(t){me.call(this,t)}var we={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:i,day:"dddd"},timeFormat:{"default":n},displayEventEnd:{month:!1,basicWeek:!1,"default":!0},isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,unselectAuto:!0,dropAccept:"*",handleWindowResize:!0,windowResizeDelay:200},be={en:{columnFormat:{week:"ddd M/D"}}},Ee={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},De=t.fullCalendar={version:"2.1.0-beta1"},Te=De.views={};t.fn.fullCalendar=function(e){var n=Array.prototype.slice.call(arguments,1),i=this;return this.each(function(r,s){var o,l=t(s),d=l.data("fullCalendar");"string"==typeof e?d&&t.isFunction(d[e])&&(o=d[e].apply(d,n),r||(i=o),"destroy"===e&&l.removeData("fullCalendar")):d||(d=new a(l,e),l.data("fullCalendar",d),d.render())}),i},De.langs=be,De.datepickerLang=function(e,n,i){var r=be[e];r||(r=be[e]={}),s(r,{isRTL:i.isRTL,weekNumberTitle:i.weekHeader,titleFormat:{month:i.showMonthAfterYear?"YYYY["+i.yearSuffix+"] MMMM":"MMMM YYYY["+i.yearSuffix+"]"},defaultButtonText:{prev:x(i.prevText),next:x(i.nextText),today:x(i.currentText)}}),t.datepicker&&(t.datepicker.regional[n]=t.datepicker.regional[e]=i,t.datepicker.regional.en=t.datepicker.regional[""],t.datepicker.setDefaults(i))},De.lang=function(t,e){var n;e&&(n=be[t],n||(n=be[t]={}),s(n,e||{})),we.lang=t},De.sourceNormalizers=[],De.sourceFetchers=[];var Ce={dataType:"json",cache:!1},Se=1,He=["sun","mon","tue","wed","thu","fri","sat"];De.applyAll=S;var ke=/^\s*\d{4}-\d\d$/,xe=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;De.moment=function(){return R(arguments)},De.moment.utc=function(){var t=R(arguments,!0);return t.hasTime()&&t.utc(),t},De.moment.parseZone=function(){return R(arguments,!0,!0)},z.prototype=D(e.fn),z.prototype.clone=function(){return R([this])},z.prototype.time=function(t){if(null==t)return e.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});delete this._ambigTime,e.isDuration(t)||e.isMoment(t)||(t=e.duration(t));var n=0;return e.isDuration(t)&&(n=24*Math.floor(t.asDays())),this.hours(n+t.hours()).minutes(t.minutes()).seconds(t.seconds()).milliseconds(t.milliseconds())},z.prototype.stripTime=function(){var t=this.toArray();return e.fn.utc.call(this),this.year(t[0]).month(t[1]).date(t[2]).hours(0).minutes(0).seconds(0).milliseconds(0),this._ambigTime=!0,this._ambigZone=!0,this},z.prototype.hasTime=function(){return!this._ambigTime},z.prototype.stripZone=function(){var t=this.toArray(),n=this._ambigTime;return e.fn.utc.call(this),this.year(t[0]).month(t[1]).date(t[2]).hours(t[3]).minutes(t[4]).seconds(t[5]).milliseconds(t[6]),n&&(this._ambigTime=!0),this._ambigZone=!0,this},z.prototype.hasZone=function(){return!this._ambigZone},z.prototype.zone=function(t){return null!=t&&(delete this._ambigTime,delete this._ambigZone),e.fn.zone.apply(this,arguments)},z.prototype.local=function(){var t=this.toArray(),n=this._ambigZone;return delete this._ambigTime,delete this._ambigZone,e.fn.local.apply(this,arguments),n&&this.year(t[0]).month(t[1]).date(t[2]).hours(t[3]).minutes(t[4]).seconds(t[5]).milliseconds(t[6]),this},z.prototype.utc=function(){return delete this._ambigTime,delete this._ambigZone,e.fn.utc.apply(this,arguments)},z.prototype.format=function(){return arguments[0]?G(this,arguments[0]):this._ambigTime?Y(this,"YYYY-MM-DD"):this._ambigZone?Y(this,"YYYY-MM-DD[T]HH:mm:ss"):Y(this)},z.prototype.toISOString=function(){return this._ambigTime?Y(this,"YYYY-MM-DD"):this._ambigZone?Y(this,"YYYY-MM-DD[T]HH:mm:ss"):e.fn.toISOString.apply(this,arguments)},z.prototype.isWithin=function(t,e){var n=N([this,t,e]);return n[0]>=n[1]&&n[0]<n[2]},z.prototype.isSame=function(t,n){var i;return n?(i=N([this,t],!0),e.fn.isSame.call(i[0],i[1],n)):(t=De.moment.parseZone(t),e.fn.isSame.call(this,t)&&Boolean(this._ambigTime)===Boolean(t._ambigTime)&&Boolean(this._ambigZone)===Boolean(t._ambigZone))},t.each(["isBefore","isAfter"],function(t,n){z.prototype[n]=function(t,i){var r=N([this,t]);return e.fn[n].call(r[0],r[1],i)}});var Me={t:function(t){return Y(t,"a").charAt(0)},T:function(t){return Y(t,"A").charAt(0)}};De.formatRange=P;var Re={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},ze={};L.prototype={grid:null,rows:null,cols:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,build:function(){this.grid.buildCoords(this.rows=[],this.cols=[]),this.computeBounds()},getCell:function(t,e){var n,i=null,r=this.rows,s=this.cols,o=-1,a=-1;if(this.inBounds(t,e)){for(n=0;r.length>n;n++)if(e>=r[n][0]&&r[n][1]>e){o=n;break}for(n=0;s.length>n;n++)if(t>=s[n][0]&&s[n][1]>t){a=n;break}o>=0&&a>=0&&(i={row:o,col:a},i.grid=this.grid,i.date=this.grid.getCellDate(i))}return i},computeBounds:function(){var t;this.containerEl&&(t=this.containerEl.offset(),this.minX=t.left,this.maxX=t.left+this.containerEl.outerWidth(),this.minY=t.top,this.maxY=t.top+this.containerEl.outerHeight())},inBounds:function(t,e){return this.containerEl?t>=this.minX&&this.maxX>t&&e>=this.minY&&this.maxY>e:!0}},B.prototype={coordMaps:null,build:function(){var t,e=this.coordMaps;for(t=0;e.length>t;t++)e[t].build()},getCell:function(t,e){var n,i=this.coordMaps,r=null;for(n=0;i.length>n&&!r;n++)r=i[n].getCell(t,e);return r}},V.prototype={coordMap:null,options:null,isListening:!1,isDragging:!1,origCell:null,origDate:null,cell:null,date:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,mousedown:function(t){v(t)&&(t.preventDefault(),this.startListening(t),this.options.distance||this.startDrag(t))},startListening:function(e){var n;this.isListening||(this.coordMap.build(),e&&(n=this.getCell(e),this.origCell=n,this.origDate=n?n.date:null,this.mouseX0=e.pageX,this.mouseY0=e.pageY),t(document).on("mousemove",this.mousemoveProxy=t.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=t.proxy(this,"mouseup")).on("selectstart",this.preventDefault),this.isListening=!0,this.trigger("listenStart",e))},mousemove:function(t){var e,n;this.isDragging||(e=this.options.distance||1,n=Math.pow(t.pageX-this.mouseX0,2)+Math.pow(t.pageY-this.mouseY0,2),n>=e*e&&this.startDrag(t)),this.isDragging&&this.drag(t)},startDrag:function(t){var e;this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.trigger("dragStart",t),e=this.getCell(t),e&&this.cellOver(e,!0))},drag:function(t){var e;this.isDragging&&(e=this.getCell(t),j(e,this.cell)||(this.cell&&this.cellOut(),e&&this.cellOver(e)))},cellOver:function(t){this.cell=t,this.date=t.date,this.trigger("cellOver",t,t.date)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cell=null,this.date=null)},mouseup:function(t){this.stopDrag(t),this.stopListening(t)},stopDrag:function(t){this.isDragging&&(this.trigger("dragStop",t),this.isDragging=!1)},stopListening:function(e){this.isListening&&(t(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.trigger("listenStop",e),this.origCell=this.cell=null,this.origDate=this.date=null)},getCell:function(t){return this.coordMap.getCell(t.pageX,t.pageY)},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(t){t.preventDefault()}},I.prototype={options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,start:function(e){this.isFollowing||(this.isFollowing=!0,this.mouseY0=e.pageY,this.mouseX0=e.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),t(document).on("mousemove",this.mousemoveProxy=t.proxy(this,"mousemove")))},stop:function(e,n){function i(){this.isAnimating=!1,r.destroyEl(),this.top0=this.left0=null,n&&n()}var r=this,s=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,t(document).off("mousemove",this.mousemoveProxy),e&&s&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:s,complete:i})):i())},getEl:function(){var t=this.el;return t||(this.sourceEl.width(),t=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),t},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var t,e;this.getEl(),null===this.top0&&(this.sourceEl.width(),t=this.sourceEl.offset(),e=this.el.offsetParent().offset(),this.top0=t.top-e.top,this.left0=t.left-e.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(t){this.topDelta=t.pageY-this.mouseY0,this.leftDelta=t.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}},X.prototype={view:null,cellHtml:"<td/>",rowHtml:function(t,e){var n,i,r=this.view,s=this.getHtmlRenderer("cell",t),o="";for(e=e||0,n=0;r.colCnt>n;n++)i=r.cellToDate(e,n),o+=s(e,n,i);return o=this.bookendCells(o,t,e),"<tr>"+o+"</tr>"},bookendCells:function(t,e,n){var i=this.view,r=this.getHtmlRenderer("intro",e)(n||0),s=this.getHtmlRenderer("outro",e)(n||0),o=i.opt("isRTL"),a=o?s:r,l=o?r:s;
return"string"==typeof t?a+t+l:t.prepend(a).append(l)},getHtmlRenderer:function(t,e){var n,i,r,s,o=this.view;return n=t+"Html",e&&(i=e+M(t)+"Html"),i&&(s=o[i])?r=o:i&&(s=this[i])?r=this:(s=o[n])?r=o:(s=this[n])&&(r=this),"function"==typeof s?function(){return s.apply(r,arguments)||""}:function(){return s||""}}},$.prototype=D(X.prototype),t.extend($.prototype,{el:null,coordMap:null,cellDuration:null,render:function(){this.bindHandlers()},buildCoords:function(){},getCellDate:function(){},getCellDayEl:function(){},rangeToSegs:function(){},bindHandlers:function(){var e=this;this.el.on("mousedown",function(n){t(n.target).is(".fc-event-container *")||e.dayMousedown(n)}),this.bindSegHandlers()},dayMousedown:function(t){var e,n,i,r=this,s=this.view,o=s.opt("selectable"),a=null,l=new V(this.coordMap,{dragStart:function(){s.unselect()},cellOver:function(t,s){l.origDate&&(i=r.getCellDayEl(t),a=[s,l.origDate].sort(E),e=a[0],n=a[1].clone().add(r.cellDuration),o&&r.renderSelection(e,n))},cellOut:function(){a=null,r.destroySelection()},listenStop:function(t){a&&(a[0].isSame(a[1])&&s.trigger("dayClick",i[0],e,t),o&&s.reportSelection(e,n,t))}});l.mousedown(t)},renderDrag:function(){},destroyDrag:function(){},renderResize:function(){},destroyResize:function(){},renderRangeHelper:function(t,e,n){var i,r=this.view;!e&&r.opt("forceEventDuration")&&(e=r.calendar.getDefaultEventEnd(!t.hasTime(),t)),i=n?D(n.event):{},i.start=t,i.end=e,i.allDay=!(t.hasTime()||e&&e.hasTime()),i.className=(i.className||[]).concat("fc-helper"),n||(i.editable=!1),this.renderHelper(i,n)},renderHelper:function(){},destroyHelper:function(){},renderSelection:function(t,e){this.renderHighlight(t,e)},destroySelection:function(){this.destroyHighlight()},renderHighlight:function(){},destroyHighlight:function(){},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'">'+"<table>"+"<thead>"+this.rowHtml("head")+"</thead>"+"</table>"+"</div>"},headCellHtml:function(t,e,n){var i=this.view,r=i.calendar,s=i.opt("columnFormat");return'<th class="fc-day-header '+i.widgetHeaderClass+" fc-"+He[n.day()]+'">'+k(r.formatDate(n,s))+"</th>"},bgCellHtml:function(t,e,n){var i=this.view,r=this.getDayClasses(n);return r.unshift("fc-day",i.widgetContentClass),'<td class="'+r.join(" ")+'" data-date="'+n.format()+'"></td>'},getDayClasses:function(t){var e=this.view,n=e.calendar.getNow().stripTime(),i=["fc-"+He[t.day()]];return"month"===e.name&&t.month()!=e.intervalStart.month()&&i.push("fc-other-month"),t.isSame(n,"day")?i.push("fc-today",e.highlightStateClass):n>t?i.push("fc-past"):i.push("fc-future"),i}}),t.extend($.prototype,{isDraggingSeg:!1,isResizingSeg:!1,renderEvents:function(){},destroyEvents:function(){},eventsToSegs:function(e){var n=this;return t.map(e,function(t){return n.eventToSegs(t)})},eventToSegs:function(t){var e,n,i=t.start.clone().stripZone(),r=this.view.calendar.getEventEnd(t).stripZone(),s=this.rangeToSegs(i,r);for(e=0;s.length>e;e++)n=s[e],n.event=t,n.eventStartMS=+i,n.eventDurationMS=r-i;return s},bindSegHandlers:function(){var e=this,n=this.view;t.each({mouseenter:function(t,e){n.trigger("eventMouseover",this,t.event,e)},mouseleave:function(t,e){n.trigger("eventMouseout",this,t.event,e)},click:function(t,e){return n.trigger("eventClick",this,t.event,e)},mousedown:function(i,r){t(r.target).is(".fc-resizer")&&n.isEventResizable(i.event)?e.segResizeMousedown(i,r):n.isEventDraggable(i.event)&&e.segDragMousedown(i,r)}},function(n,i){e.el.on(n,".fc-content-skeleton .fc-event-container > *",function(e){var n=t(this).data("fc-seg");n&&i.call(this,n,e)})})},segDragMousedown:function(t,e){var n=this,i=this.view,r=t.el,s=t.event,o=s.start,a=i.calendar.getEventEnd(s),l=null,d=new I(t.el,{parentEl:i.el,opacity:i.opt("dragOpacity"),revertDuration:i.opt("dragRevertDuration"),zIndex:2}),h=new V(i.coordMap,{distance:5,listenStart:function(t){d.hide(),d.start(t)},dragStart:function(t){n.isDraggingSeg=!0,i.hideEvent(s),i.trigger("eventDragStart",r[0],s,t,{})},cellOver:function(e,n){var r,c,u=h.origDate;u&&(n.hasTime()===u.hasTime()?(r=w(n,u),l=o.clone().add(r),c=null===s.end?null:a.clone().add(r)):(l=n,c=null),i.renderDrag(l,c,t)?d.hide():d.show())},cellOut:function(){l=null,i.destroyDrag(),d.show()},dragStop:function(t){var e=l&&!l.isSame(o);d.stop(!e,function(){n.isDraggingSeg=!1,i.destroyDrag(),i.showEvent(s),i.trigger("eventDragStop",r[0],s,t,{}),e&&i.eventDrop(r[0],s,l,t)})},listenStop:function(){d.stop()}});h.mousedown(e)},segResizeMousedown:function(t,e){function n(){r.destroyResize(),s.showEvent(a)}var i,r=this,s=this.view,o=t.el,a=t.event,l=a.start,d=s.calendar.getEventEnd(a),h=null;i=new V(this.coordMap,{distance:5,dragStart:function(t){r.isResizingSeg=!0,s.trigger("eventResizeStart",o[0],a,t,{})},cellOver:function(e,i){l>i&&(i=l),h=i.clone().add(r.cellDuration),h.isSame(d)?(h=null,n()):(r.renderResize(l,h,t),s.hideEvent(a))},cellOut:function(){h=null,n()},dragStop:function(t){r.isResizingSeg=!1,n(),s.trigger("eventResizeStop",o[0],a,t,{}),h&&s.eventResize(o[0],a,h,t)}}),i.mousedown(e)},getSegClasses:function(t,e,n){var i=t.event,r=["fc-event",t.isStart?"fc-start":"fc-not-start",t.isEnd?"fc-end":"fc-not-end"].concat(i.className,i.source?i.source.className:[]);return e&&r.push("fc-draggable"),n&&r.push("fc-resizable"),r},getEventSkinCss:function(t){var e=this.view,n=t.source||{},i=t.color,r=n.color,s=e.opt("eventColor"),o=t.backgroundColor||i||n.backgroundColor||r||e.opt("eventBackgroundColor")||s,a=t.borderColor||i||n.borderColor||r||e.opt("eventBorderColor")||s,l=t.textColor||n.textColor||e.opt("eventTextColor"),d=[];return o&&d.push("background-color:"+o),a&&d.push("border-color:"+a),l&&d.push("color:"+l),d.join(";")}}),K.prototype=D($.prototype),t.extend(K.prototype,{numbersVisible:!1,cellDuration:e.duration({days:1}),bottomCoordPadding:0,rowEls:null,dayEls:null,helperEls:null,highlightEls:null,render:function(){var e,n=this.view,i="";for(e=0;n.rowCnt>e;e++)i+=this.dayRowHtml(e);this.el.html(i),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),this.dayEls.each(function(e,i){var r=n.cellToDate(Math.floor(e/n.colCnt),e%n.colCnt);n.trigger("dayRender",null,r,t(i))}),$.prototype.render.call(this)},dayRowHtml:function(t){var e=this.view,n=["fc-row","fc-week"];return e.dayRowThemeClass&&n.push(e.dayRowThemeClass),'<div class="'+n.join(" ")+'">'+'<div class="fc-bg">'+"<table>"+this.rowHtml("day",t)+"</table>"+"</div>"+'<div class="fc-content-skeleton">'+"<table>"+(this.numbersVisible?"<thead>"+this.rowHtml("number",t)+"</thead>":"")+"</table>"+"</div>"+"</div>"},dayCellHtml:function(t,e,n){return this.bgCellHtml(t,e,n)},buildCoords:function(e,n){var i,r,s,o=this.view.colCnt;this.dayEls.slice(0,o).each(function(e,o){i=t(o),r=i.offset().left,e&&(s[1]=r),s=[r],n[e]=s}),s[1]=r+i.outerWidth(),this.rowEls.each(function(n,o){i=t(o),r=i.offset().top,n&&(s[1]=r),s=[r],e[n]=s}),s[1]=r+i.outerHeight()+this.bottomCoordPadding},getCellDate:function(t){return this.view.cellToDate(t)},getCellDayEl:function(t){return this.dayEls.eq(t.row*this.view.colCnt+t.col)},rangeToSegs:function(t,e){return this.view.rangeToSegments(t,e)},renderDrag:function(t,e,n){var i;return this.renderHighlight(t,e||this.view.calendar.getDefaultEventEnd(!0,t)),n&&!n.el.closest(this.el).length?(this.renderRangeHelper(t,e,n),i=this.view.opt("dragOpacity"),void 0!==i&&this.helperEls.css("opacity",i),!0):void 0},destroyDrag:function(){this.destroyHighlight(),this.destroyHelper()},renderResize:function(t,e,n){this.renderHighlight(t,e),this.renderRangeHelper(t,e,n)},destroyResize:function(){this.destroyHighlight(),this.destroyHelper()},renderHelper:function(e,n){var i=[],r=this.renderEventRows([e]).tbodyEls;this.rowEls.each(function(e,s){var o,a=t(s),l=t('<div class="fc-helper-skeleton"><table/></div>');o=n&&n.row===e?n.el.position().top:a.find(".fc-content-skeleton tbody").position().top,l.css("top",o).find("table").append(r[e]),a.append(l),i.push(l[0])}),this.helperEls=t(i)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},renderHighlight:function(e,n){var i,r,s,o=this.rangeToSegs(e,n),a=[];for(i=0;o.length>i;i++)r=o[i],s=t(this.highlightSkeletonHtml(r.leftCol,r.rightCol+1)),s.appendTo(this.rowEls[r.row]),a.push(s[0]);this.highlightEls=t(a)},destroyHighlight:function(){this.highlightEls&&(this.highlightEls.remove(),this.highlightEls=null)},highlightSkeletonHtml:function(t,e){var n=this.view.colCnt,i="";return t>0&&(i+='<td colspan="'+t+'"/>'),e>t&&(i+='<td colspan="'+(e-t)+'" class="fc-highlight" />'),n>e&&(i+='<td colspan="'+(n-e)+'"/>'),i=this.bookendCells(i,"highlight"),'<div class="fc-highlight-skeleton"><table><tr>'+i+"</tr>"+"</table>"+"</div>"}}),t.extend(K.prototype,{eventTbodyEls:null,renderEvents:function(e){var n=this.renderEventRows(e),i=this.eventTbodyEls=n.tbodyEls;return this.rowEls.each(function(e,n){t(n).find(".fc-content-skeleton > table").append(i[e])}),n.segs},destroyEvents:function(){this.eventTbodyEls&&(this.eventTbodyEls.remove(),this.eventTbodyEls=null)},renderEventRows:function(e){var n,i,r=this.view,s=this.eventsToSegs(e),o=this.groupSegRows(s),a="",l=[];for(n=0;s.length>n;n++)a+=this.renderSegHtml(s[n]);for(t(a).each(function(e,n){s[e].el=r.resolveEventEl(s[e].event,t(n))}),i=0;o.length>i;i++)o[i]=t.grep(o[i],U),l.push(this.renderSegSkeleton(o[i])[0]);return{tbodyEls:t(l),segs:C(o)}},renderSegHtml:function(t){var e,n=this.view,i=n.opt("isRTL"),r=t.event,s=n.isEventDraggable(r),o=r.allDay&&t.isEnd&&n.isEventResizable(r),a=this.getSegClasses(t,s,o),l=this.getEventSkinCss(r),d="";return a.unshift("fc-day-grid-event"),!r.allDay&&t.isStart&&(d='<span class="fc-time">'+k(n.getEventTimeText(r))+"</span>"),e='<span class="fc-title">'+(k(r.title||"")||"&nbsp;")+"</span>",'<a class="'+a.join(" ")+'"'+(r.url?' href="'+k(r.url)+'"':"")+(l?' style="'+l+'"':"")+">"+'<div class="fc-content">'+(i?e+" "+d:d+" "+e)+"</div>"+(o?'<div class="fc-resizer"/>':"")+"</a>"},renderSegSkeleton:function(e){function n(e){for(;e>o;)h=i[o],h?h.attr("rowspan",parseInt(h.attr("rowspan")||1,10)+1):(h=t("<td/>"),a.append(h)),p[o]=h,o++}var i,r,s,o,a,l,d,h,c=this.view,u=c.colCnt,f=this.buildSegLevels(e),g=t("<tbody/>"),p=[];for(r=0;f.length+1>r;r++){if(s=f[r],o=0,a=t("<tr/>"),i=p,p=[],s)for(l=0;s.length>l;l++)d=s[l],n(d.leftCol),h=t('<td class="fc-event-container"/>').append(d.el),d.rightCol>d.leftCol&&h.attr("colspan",d.rightCol-d.leftCol+1),a.append(h),o=d.rightCol+1;n(u),this.bookendCells(a,"eventSkeleton"),g.append(a)}return g},buildSegLevels:function(t){var e,n,i,r=[];for(t.sort(q),e=0;t.length>e;e++){for(n=t[e],i=0;r.length>i&&Q(n,r[i]);i++);n.level=i,(r[i]||(r[i]=[])).push(n)}for(i=0;r.length>i;i++)r[i].sort(J);return r},groupSegRows:function(t){var e,n=this.view,i=[];for(e=0;n.rowCnt>e;e++)i.push([]);for(e=0;t.length>e;e++)i[t[e].row].push(t[e]);return i}}),te.prototype=D($.prototype),t.extend(te.prototype,{slotDuration:null,snapDuration:null,minTime:null,maxTime:null,dayEls:null,slatEls:null,slatTops:null,highlightEl:null,helperEl:null,render:function(){this.processOptions(),this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr"),this.computeSlatTops(),$.prototype.render.call(this)},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+"</table>"+"</div>"+'<div class="fc-slats">'+"<table>"+this.slatRowHtml()+"</table>"+"</div>"},slotBgCellHtml:function(t,e,n){return this.bgCellHtml(t,e,n)},slatRowHtml:function(){for(var t,n,i,r=this.view,s=r.calendar,o=r.opt("isRTL"),a="",l=0===this.slotDuration.asMinutes()%15,d=e.duration(+this.minTime);this.maxTime>d;)t=r.start.clone().time(d),n=t.minutes(),i='<td class="fc-axis fc-time '+r.widgetHeaderClass+'" '+r.axisStyleAttr()+">"+(l&&n?"":"<span>"+k(s.formatDate(t,r.opt("axisFormat")))+"</span>")+"</td>",a+="<tr "+(n?'class="fc-minor"':"")+">"+(o?"":i)+'<td class="'+r.widgetContentClass+'"/>'+(o?i:"")+"</tr>",d.add(this.slotDuration);return a},processOptions:function(){var t=this.view,n=t.opt("slotDuration"),i=t.opt("snapDuration");n=e.duration(n),i=i?e.duration(i):n,this.slotDuration=n,this.snapDuration=i,this.cellDuration=i,this.minTime=e.duration(t.opt("minTime")),this.maxTime=e.duration(t.opt("maxTime"))},rangeToSegs:function(t,e){var n,i,r,s,o,a,l,d,h=this.view,c=[];for(t=t.clone().stripZone(),e=e.clone().stripZone(),n=0;h.colCnt>n;n++)i=h.cellToDate(0,n),r=i.clone().stripZone().time(this.minTime),s=i.clone().stripZone().time(this.maxTime),e>r&&s>t&&(t>=r?(o=t.clone(),l=!0):(o=r,l=!1),s>=e?(a=e.clone(),d=!0):(a=s,d=!1),c.push({col:n,start:o,end:a,isStart:l,isEnd:d}));return c},buildCoords:function(n,i){var r,s,o=this.view.colCnt,a=this.el.offset().top,l=e.duration(+this.minTime),d=null;for(this.dayEls.slice(0,o).each(function(e,n){r=t(n),s=r.offset().left,d&&(d[1]=s),d=[s],i[e]=d}),d[1]=s+r.outerWidth(),d=null;this.maxTime>l;)s=a+this.computeTimeTop(l),d&&(d[1]=s),d=[s],n.push(d),l.add(this.snapDuration);d[1]=a+this.computeTimeTop(l)},getCellDate:function(t){return this.view.cellToDate(0,t.col).time(this.snapDuration*t.row)},getCellDayEl:function(t){return this.dayEls.eq(t.col)},computeDateTop:function(t,n){return this.computeTimeTop(e.duration(t.clone().stripZone()-n.clone().stripTime()))},computeTimeTop:function(t){var e,n,i,r,s=(t-this.minTime)/this.slotDuration;return s=Math.max(0,s),s=Math.min(this.slatEls.length,s),e=Math.floor(s),n=s-e,i=this.slatTops[e],n?(r=this.slatTops[e+1],i+(r-i)*n):i},computeSlatTops:function(){var e,n=[];this.slatEls.each(function(i,r){e=t(r).position().top,n.push(e)}),n.push(e+this.slatEls.last().outerHeight()),this.slatTops=n},renderDrag:function(t,e,n){var i;return n?(this.renderRangeHelper(t,e,n),i=this.view.opt("dragOpacity"),void 0!==i&&this.helperEl.css("opacity",i),!0):(this.renderHighlight(t,e||this.view.calendar.getDefaultEventEnd(!1,t)),void 0)},destroyDrag:function(){this.destroyHelper(),this.destroyHighlight()},renderResize:function(t,e,n){this.renderRangeHelper(t,e,n)},destroyResize:function(){this.destroyHelper()},renderHelper:function(e,n){var i,r,s,o=this.renderEventTable([e]),a=o.tableEl,l=o.segs;for(i=0;l.length>i;i++)r=l[i],n&&n.col===r.col&&(s=n.el,r.el.css({left:s.css("left"),right:s.css("right"),"margin-left":s.css("margin-left"),"margin-right":s.css("margin-right")}));this.helperEl=t('<div class="fc-helper-skeleton"/>').append(a).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(t,e){this.view.opt("selectHelper")?this.renderRangeHelper(t,e):this.renderHighlight(t,e)},destroySelection:function(){this.destroyHelper(),this.destroyHighlight()},renderHighlight:function(e,n){this.highlightEl=t(this.highlightSkeletonHtml(e,n)).appendTo(this.el)},destroyHighlight:function(){this.highlightEl&&(this.highlightEl.remove(),this.highlightEl=null)},highlightSkeletonHtml:function(t,e){var n,i,r,s,o,a=this.view,l=this.rangeToSegs(t,e),d="",h=0;for(n=0;l.length>n;n++)i=l[n],i.col>h&&(d+='<td colspan="'+(i.col-h)+'"/>',h=i.col),r=a.cellToDate(0,h),s=this.computeDateTop(i.start,r),o=this.computeDateTop(i.end,r),d+='<td><div class="fc-highlight-container"><div class="fc-highlight" style="top:'+s+"px;bottom:-"+o+'px"/>'+"</div>"+"</td>",h++;return a.colCnt>h&&(d+='<td colspan="'+(a.colCnt-h)+'"/>'),d=this.bookendCells(d,"highlight"),'<div class="fc-highlight-skeleton"><table><tr>'+d+"</tr>"+"</table>"+"</div>"}}),t.extend(te.prototype,{eventSkeletonEl:null,renderEvents:function(e){var n=this.renderEventTable(e);return this.eventSkeletonEl=t('<div class="fc-content-skeleton"/>').append(n.tableEl),this.el.append(this.eventSkeletonEl),n.segs},destroyEvents:function(){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderEventTable:function(e){var n,i,r,s,o,a=this.view,l=t("<table><tr/></table>"),d=l.find("tr"),h=this.eventsToSegs(e),c=this.groupSegCols(h),u="";for(n=0;h.length>n;n++)i=h[n],u+=this.renderSegHtml(i),i.top=this.computeDateTop(i.start,i.start),i.bottom=this.computeDateTop(i.end,i.start);for(t(u).each(function(e,n){h[e].el=a.resolveEventEl(h[e].event,t(n))}),r=0;c.length>r;r++){for(s=c[r],s=t.grep(s,U),ee(s),c[r]=s,o=t('<div class="fc-event-container"/>'),n=0;s.length>n;n++)i=s[n],i.el.css(this.generateSegPositionCss(i)),o.append(i.el);d.append(t("<td/>").append(o))}return this.bookendCells(d,"eventSkeleton"),{tableEl:l,segs:C(c)}},renderSegHtml:function(t){var e,n,i=this.view,r=t.event,s=i.isEventDraggable(r),o=t.isEnd&&i.isEventResizable(r),a=this.getSegClasses(t,s,o),l=this.getEventSkinCss(r);return a.unshift("fc-time-grid-event"),i.isMultiDayEvent(r)?(t.isStart||t.isEnd)&&(e=i.getEventTimeText(t.start,t.end),n=i.getEventTimeText(t.start,t.end,"LT")):(e=i.getEventTimeText(r),n=i.getEventTimeText(r,"LT")),'<a class="'+a.join(" ")+'"'+(l?' style="'+l+'"':"")+">"+'<div class="fc-content">'+(e?'<div class="fc-time" data-full="'+k(n)+'">'+"<span>"+k(e)+"</span>"+"</div>":"")+(r.title?'<div class="fc-title">'+k(r.title)+"</div>":"")+"</div>"+'<div class="fc-bg"/>'+(o?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(t){var e,n,i,r=this.view,s=r.opt("isRTL"),o=r.opt("slotEventOverlap"),a=t.backwardCoord,l=t.forwardCoord;return o&&(l=Math.min(1,a+2*(l-a))),s?(e=1-l,n=a):(e=a,n=1-l),i={zIndex:t.level+1,top:t.top,bottom:-t.bottom,left:100*e+"%",right:100*n+"%"},o&&t.forwardPressure&&(i[s?"marginLeft":"marginRight"]=20),i},groupSegCols:function(t){var e,n=this.view,i=[];for(e=0;n.colCnt>e;e++)i.push([]);for(e=0;t.length>e;e++)i[t[e].col].push(t[e]);return i}}),de.prototype={calendar:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,rowCnt:null,colCnt:null,segs:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,dayRowThemeClass:null,documentMousedownProxy:null,documentDragStartProxy:null,init:function(){var e=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=e+"-widget-header",this.widgetContentClass=e+"-widget-content",this.highlightStateClass=e+"-state-highlight",t(document).on("mousedown",this.documentMousedownProxy=t.proxy(this,"documentMousedown")).on("dragstart",this.documentDragStartProxy=t.proxy(this,"documentDragStart"))},render:function(){this.updateHeight(),this.updateWidth(),this.trigger("viewRender",this,this,this.el)},destroy:function(){this.unselect(),this.trigger("viewDestroy",this,this,this.el),this.destroyEvents(),this.el.empty(),t(document).off("mousedown",this.documentMousedownProxy).off("dragstart",this.documentDragStartProxy)},incrementDate:function(){},updateWidth:function(){},updateHeight:function(){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(){},computeScrollerHeight:function(t){var e=this.el.outerHeight()-this.scrollerEl.height();return t-e},recordScroll:function(){this.scrollTop=this.scrollerEl.scrollTop()},restoreScroll:function(){null!==this.scrollTop&&this.scrollerEl.scrollTop(this.scrollTop)},renderEvents:function(){this.segEach(function(t){t.el.data("fc-seg",t),this.trigger("eventAfterRender",t.event,t.event,t.el)}),this.trigger("eventAfterAllRender")},destroyEvents:function(){this.segEach(function(t){this.trigger("eventDestroy",t.event,t.event,t.el)}),this.segs=[]},resolveEventEl:function(e,n){var i=this.trigger("eventRender",e,e,n);return i===!1?n=null:i&&i!==!0&&(n=t(i)),n},showEvent:function(t){this.segEach(function(t){t.el.css("visibility","")},t)},hideEvent:function(t){this.segEach(function(t){t.el.css("visibility","hidden")},t)},segEach:function(t,e){var n,i=this.segs||[];for(n=0;i.length>n;n++)e&&i[n].event._id!==e._id||t.call(this,i[n])},renderDrag:function(){},destroyDrag:function(){},documentDragStart:function(e){var n,i=this,r=null;this.opt("droppable")&&(n=new V(this.coordMap,{cellOver:function(t,e){r=e,i.renderDrag(e)},cellOut:function(){r=null,i.destroyDrag()}}),t(document).one("dragstop",function(t,e){i.destroyDrag(),r&&i.trigger("drop",t.target,r,t,e)}),n.startDrag(e))},select:function(t,e,n){this.unselect(n),this.renderSelection(t,e),this.reportSelection(t,e,n)},renderSelection:function(){},reportSelection:function(t,e,n){this.isSelected=!0,this.trigger("select",null,t,e,n)},unselect:function(t){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,t))},destroySelection:function(){},documentMousedown:function(e){var n;this.isSelected&&this.opt("unselectAuto")&&v(e)&&(n=this.opt("unselectCancel"),n&&t(e.target).closest(n).length||this.unselect(e))}},he.prototype=D(de.prototype),t.extend(he.prototype,{dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,render:function(t,e,n){this.rowCnt=t,this.colCnt=e,this.dayNumbersVisible=n,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),de.prototype.render.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+"</td>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+'<td class="'+this.widgetContentClass+'">'+'<div class="fc-day-grid-container">'+'<div class="fc-day-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},headIntroHtml:function(){return this.weekNumbersVisible?'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+">"+"<span>"+k(this.opt("weekNumberTitle"))+"</span>"+"</th>":void 0},numberIntroHtml:function(t){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+">"+"<span>"+this.calendar.calculateWeekNumber(this.cellToDate(t,0))+"</span>"+"</td>":void 0},dayIntroHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>":void 0},introHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>":void 0},numberCellHtml:function(t,e,n){var i;return this.dayNumbersVisible?(i=this.dayGrid.getDayClasses(n),i.unshift("fc-day-number"),'<td class="'+i.join(" ")+'" data-date="'+n.format()+'">'+n.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=p(this.el.find(".fc-week-number")))},setHeight:function(t,e){var n;this.scrollerEl.height("").removeClass("fc-scroller"),u(this.headRowEl),n=this.computeScrollerHeight(t),this.setGridHeight(n,e),!e&&this.dayGrid.el.height()>n&&(this.scrollerEl.height(n).addClass("fc-scroller"),c(this.headRowEl,m(this.scrollerEl)),n=this.computeScrollerHeight(t),this.scrollerEl.height(n),this.restoreScroll())},setGridHeight:function(t,e){e?g(this.dayGrid.rowEls):f(this.dayGrid.rowEls,t,!0)},renderEvents:function(t){this.segs=this.dayGrid.renderEvents(t),this.updateHeight(),de.prototype.renderEvents.call(this,t)},destroyEvents:function(){this.recordScroll(),this.dayGrid.destroyEvents(),this.updateHeight(),de.prototype.destroyEvents.call(this)},renderDrag:function(t,e,n){return this.dayGrid.renderDrag(t,e,n)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(t,e){this.dayGrid.renderSelection(t,e)},destroySelection:function(){this.dayGrid.destroySelection()}}),r({fixedWeekCount:!0}),Te.month=ce,ce.prototype=D(he.prototype),t.extend(ce.prototype,{name:"month",incrementDate:function(t,e){return t.clone().stripTime().add("months",e).startOf("month")},render:function(t){var e;this.intervalStart=t.clone().stripTime().startOf("month"),this.intervalEnd=this.intervalStart.clone().add("months",1),this.start=this.intervalStart.clone(),this.start=this.skipHiddenDays(this.start),this.start.startOf("week"),this.start=this.skipHiddenDays(this.start),this.end=this.intervalEnd.clone(),this.end=this.skipHiddenDays(this.end,-1,!0),this.end.add("days",(7-this.end.weekday())%7),this.end=this.skipHiddenDays(this.end,-1,!0),e=Math.ceil(this.end.diff(this.start,"weeks",!0)),this.isFixedWeeks()&&(this.end.add("weeks",6-e),e=6),this.title=this.calendar.formatDate(this.intervalStart,this.opt("titleFormat")),he.prototype.render.call(this,e,this.getCellsPerWeek(),!0)},setGridHeight:function(t,e){e=e||"variable"===this.opt("weekMode"),e&&(t*=this.rowCnt/6),f(this.dayGrid.rowEls,t,!e)},isFixedWeeks:function(){var t=this.opt("weekMode");return t?"fixed"===t:this.opt("fixedWeekCount")}}),Te.basicWeek=ue,ue.prototype=D(he.prototype),t.extend(ue.prototype,{name:"basicWeek",incrementDate:function(t,e){return t.clone().stripTime().add("weeks",e).startOf("week")},render:function(t){this.intervalStart=t.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add("weeks",1),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," — "),he.prototype.render.call(this,1,this.getCellsPerWeek(),!1)}}),Te.basicDay=fe,fe.prototype=D(he.prototype),t.extend(fe.prototype,{name:"basicDay",incrementDate:function(t,e){var n=t.clone().stripTime().add("days",e);return n=this.skipHiddenDays(n,0>e?-1:1)},render:function(t){this.start=this.intervalStart=t.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add("days",1),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),he.prototype.render.call(this,1,1,!1)}}),r({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:ge,timeFormat:{agenda:pe},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}),me.prototype=D(de.prototype),t.extend(me.prototype,{timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,render:function(e){this.rowCnt=1,this.colCnt=e,this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.el=this.el.find(".fc-time-grid"),this.timeGrid.render(),this.bottomRuleEl=t('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayRowThemeClass=this.widgetHeaderClass,this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)"),de.prototype.render.call(this),this.resetScroll()},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+"</td>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+'<td class="'+this.widgetHeaderClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container">'+'<div class="fc-time-grid"/>'+"</div>"+"</td>"+"</tr>"+"</tbody>"+"</table>"},headIntroHtml:function(){var t,e,n,i;return this.opt("weekNumbers")?(t=this.cellToDate(0,0),e=this.calendar.calculateWeekNumber(t),n=this.opt("weekNumberTitle"),i=this.opt("isRTL")?e+n:n+e,'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+">"+"<span>"+k(i)+"</span>"+"</th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="'+this.widgetHeaderClass+' fc-axis" '+this.axisStyleAttr()+">"+"<span>"+(this.opt("allDayHTML")||k(this.opt("allDayText")))+"</span>"+"</td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateWidth:function(){this.axisWidth=p(this.el.find(".fc-axis"))},setHeight:function(t,e){var n,i,r;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.height("").removeClass("fc-scroller"),u(this.noScrollRowEls),e||(n=this.computeScrollerHeight(t),i=this.timeGrid.el.height(),this.scrollerEl.height(n),i>n?(this.scrollerEl.addClass("fc-scroller"),c(this.noScrollRowEls,m(this.scrollerEl)),n=this.computeScrollerHeight(t),this.scrollerEl.height(n),this.restoreScroll()):(r=n-i,r>this.bottomRuleHeight+5&&this.bottomRuleEl.show()))},resetScroll:function(){function t(){n.scrollerEl.scrollTop(r)}var n=this,i=e.duration(this.opt("scrollTime")),r=this.timeGrid.computeTimeTop(i);r=Math.ceil(r),r&&r++,t(),setTimeout(t,0)},renderEvents:function(t){var e,n,i=[],r=[],s=[];for(n=0;t.length>n;n++)t[n].allDay?i.push(t[n]):r.push(t[n]);e=this.timeGrid.renderEvents(r),this.dayGrid&&(s=this.dayGrid.renderEvents(i)),this.updateHeight(),this.segs=s.concat(e),de.prototype.renderEvents.call(this,t)},destroyEvents:function(){this.recordScroll(),this.timeGrid.destroyEvents(),this.dayGrid&&this.dayGrid.destroyEvents(),de.prototype.destroyEvents.call(this)},renderDrag:function(t,e,n){return t.hasTime()?this.timeGrid.renderDrag(t,e,n):this.dayGrid?this.dayGrid.renderDrag(t,e,n):void 0},destroyDrag:function(){this.timeGrid.destroyDrag(),this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(t,e){t.hasTime()||e.hasTime()?this.timeGrid.renderSelection(t,e):this.dayGrid&&this.dayGrid.renderSelection(t,e)},destroySelection:function(){this.timeGrid.destroySelection(),this.dayGrid&&this.dayGrid.destroySelection()}}),Te.agendaWeek=ve,ve.prototype=D(me.prototype),t.extend(ve.prototype,{name:"agendaWeek",incrementDate:function(t,e){return t.clone().stripTime().add("weeks",e).startOf("week")},render:function(t){this.intervalStart=t.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add("weeks",1),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," — "),me.prototype.render.call(this,this.getCellsPerWeek())}}),Te.agendaDay=ye,ye.prototype=D(me.prototype),t.extend(ye.prototype,{name:"agendaDay",incrementDate:function(t,e){var n=t.clone().stripTime().add("days",e);return n=this.skipHiddenDays(n,0>e?-1:1)},render:function(t){this.start=this.intervalStart=t.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add("days",1),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),me.prototype.render.call(this,1)}})});